<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mecanizado Fácil</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="container">
        <h1>Mecanizado Fácil</h1>
        <ul>
            <li><a href="engranajes_avanzada.html">Calculadora Avanzada de Engranajes</a></li>
            <li><a href="avances_fresadora.html">Calculadora de Avances Para Freasadoras - Mecanizado Fácil</a></li>
            <li><a href="calculadora_cientifica.html">Calculadora Científica</a></li>
            <li><a href="codigo_g76_fanuc.html">Calculadora de Código G G76 (Fanuc) y Guía</a></li>
            <li><a href="coordenadas_agujeros.html">Calculadora de Cuerdas y Coordenadas de Agujeros</a></li>
            <li><a href="desarrollo_cilindros_conos.html">Calculadora de Desarrollo de Cilindros y Conos</a></li>
            <li><a href="inclinacion_conicidad.html">Calculadora de Inclinación y Conicidad</a></li>
            <li><a href="peso_materiales.html">Calculadora de Peso de Materiales</a></li>
            <li><a href="tolerancias_iso.html">Calculadora de Tolerancias ISO - Mecanizado Fácil</a></li>
            <li><a href="calculadora_triangulos.html">Calculadora de Triángulos</a></li>
            <li><a href="cabezal_divisor.html">Calculadora para Cabezal Divisor</a></li>
            <li><a href="consejos_principiantes.html">Consejos para Principiantes en Mecanizado - Mecanizado Fácil</a>
            </li>
            <li><a href="consultor_roscas.html">Consultor de Roscas para Taller</a></li>
            <li><a href="conversiones_tecnicas.html">Conversiones Técnicas para Talleres Mecánicos</a></li>
            <li><a href="codigo_g71_torno.html">Generador de Código G71 y Guía para Torno CNC</a></li>
            <li><a href="Glosario.html">Glosario</a></li>
            <li><a href="calculadora_chaveteros.html">Mecanizado Fácil - Calculadora de Chaveteros</a></li>
            <li><a href="inclinacion_cabezal.html">Mecanizado Fácil - Calculadora de Inclinación de Cabezal</a></li>
            <li><a href="suite_integral.html">Mecanizado Fácil - Suite Integral para Talleres Mecánicos</a></li>
            <li><a href="renuncia_responsabilidad.html">Renuncia de Responsabilidad - Mecanizado Fácil</a></li>
            <li><a href="seguridad_talleres.html">Seguridad en Talleres de Mecanizado - Mecanizado Fácil</a></li>
            <li><a href="test_seguridad.html">Test de Seguridad en Mecanizado</a></li>
            <!-- <li><a href="ventas.html">Ventas</a></li> -->
        </ul>
    </div>

    <footer>
        <p>Hecho por Rivas Isaac google-sites.overhang127@passinbox.com</p>
    </footer>

    <!-- Botón de instalación PWA -->
    <button id="installButton" style="display: none;">Instalar como App</button>

    <script>
        let deferredPrompt; // Variable para almacenar el evento de instalación

        // Escuchar el evento beforeinstallprompt
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevenir que la mini-barra de información aparezca automáticamente
            e.preventDefault();
            // Almacenar el evento para que pueda ser activado más tarde.
            deferredPrompt = e;
            // Mostrar el botón de instalación
            const installButton = document.getElementById('installButton');
            if (installButton) {
                installButton.style.display = 'block';
            }
            console.log('\'beforeinstallprompt\' event was fired.');
        });

        // Manejar el clic en el botón de instalación
        const installButton = document.getElementById('installButton');
        if (installButton) {
            installButton.addEventListener('click', async () => {
                // Ocultar el botón de instalación
                installButton.style.display = 'none';
                // Mostrar el prompt de instalación
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    // Esperar a que el usuario responda al prompt
                    const { outcome } = await deferredPrompt.userChoice;
                    // Opcionalmente, enviar analíticas para rastrear si el usuario aceptó el prompt
                    console.log(`User response to the install prompt: ${outcome}`);
                    // Ya usamos el prompt, no se puede usar de nuevo; lo limpiamos
                    deferredPrompt = null;
                }
            });
        }

        // Escuchar el evento appinstalled (opcional, para rastrear)
        window.addEventListener('appinstalled', () => {
            console.log('PWA was installed');
            const installButton = document.getElementById('installButton');
            if (installButton) {
                installButton.style.display = 'none'; // Ocultar botón después de la instalación exitosa
            }
        });

        // Registro automático del Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registrado con éxito: ', registration.scope);
                    })
                    .catch(err => {
                        console.log('Fallo en el registro del ServiceWorker: ', err);
                    });
            });
        }
    </script>
</body>

</html>